# =========================================================
# FRPS PaaS 专用配置模板
# 修复版：移除不支持的 default 函数，依赖 Docker ENV 默认值
# =========================================================

bindAddr = "0.0.0.0"

# 直接读取环境变量，默认值由 Dockerfile 提供
bindPort = {{ .Envs.FRP_BIND_PORT }}

vhostHTTPPort = {{ .Envs.FRP_HTTP_PORT }}
vhostHTTPSPort = {{ .Envs.FRP_HTTPS_PORT }}

# =========================================================
# Dashboard
# =========================================================
webServer.addr = "0.0.0.0"
webServer.port = {{ .Envs.FRP_DASHBOARD_PORT }}
webServer.user = "{{ .Envs.FRP_DASHBOARD_USER }}"
webServer.password = "{{ .Envs.FRP_DASHBOARD_PWD }}"

# =========================================================
# Auth
# =========================================================
auth.method = "token"
# Token 必须在 Zeabur 环境变量中设置，否则为空串
auth.token = "{{ .Envs.FRP_AUTH_TOKEN }}"

# =========================================================
# Log
# =========================================================
log.to = "console"
log.level = "info"
log.maxDays = 3

# =========================================================
# Transport
# =========================================================
transport.maxPoolCount = 2000
transport.tcpMux = true
transport.tcpKeepalive = 7200

allowPorts = [
  { start = {{ .Envs.FRP_ALLOW_PORT_START }}, end = {{ .Envs.FRP_ALLOW_PORT_END }} }
]

maxPortsPerClient = {{ .Envs.FRP_MAX_PORTS }}
